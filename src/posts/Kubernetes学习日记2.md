---
title: Kubernetes学习日记（二）
description: 存储资源管理
---

如果希望把pod内的信息持久化（比如数据库pod之类的），就必然会用到存储资源。首先，这样的存储资源是可以被整个集群共享的，那么它应该是某种形式的网络存储，我们可以从一下几个方向着手：
- nfs(一种分布式文件系统协议，在各大系统上有广泛的支持)
- git仓库（git仓库本身就是一个存储的地方，还可以通过git进行版本管理）
- 云服务商提供的存储资源（对象存储之类，或者是文件存储，或者是nfs）

## nfs
NFS (Network File System) 是一种分布式文件系统协议，用于在不同的计算机系统之间共享文件。它是一种基于客户端-服务器模型的协议，其中一个或多个服务器提供存储服务，客户端可以通过网络连接到这些服务器，并访问共享的文件和目录。

### 安装配置nfs
centos可以参考[这里](https://www.cnblogs.com/Andya/p/14760281.html)进行配置，如果执行`showmount -e localhost`能看到输出，说明nfs服务器配置没问题。客户端挂载完毕后可以往里边写点东西，如果客户端写的东西能够在服务器端看到，那么就是配置成功了。

#### 一些坑
服务器端需要打开一些nfs的端口，比如`111`和`2049`是一定要打开的，可以通过`telnet ip 111`和`telnet ip 2049`测试端口是否打开（只需要telnet输出connected就说明连接成功，不一定要有什么具体内容）。


### 在集群中使用nfs


## git仓库作为持久卷
用git仓库做持久卷是可行的，但是并不能使用私有git仓库，也就是说数据必须公开。



## 使用对象存储作为持久卷
参考腾讯云的[官方文档](https://cloud.tencent.com/document/product/457/44232)，首先需要创建`Secret`：



